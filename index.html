<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Quiz Interactif Amélioré</title>
        <link rel="stylesheet" href="styles.css" />
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>❓</text></svg>" />
    </head>
    <body>
        <div class="quiz-container">
            <header>
                <h1>Quiz Interactif</h1>

                <fieldset class="quiz-settings">
                    <legend class="visually-hidden">Paramètres du Quiz</legend>

                    <button id="themeToggleBtn" title="Changer le thème" aria-label="Basculer le thème sombre/clair">
                        <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5" />
                            <line x1="12" y1="1" x2="12" y2="3" />
                            <line x1="12" y1="21" x2="12" y2="23" />
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                            <line x1="1" y1="12" x2="3" y2="12" />
                            <line x1="21" y1="12" x2="23" y2="12" />
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                        </svg>
                        <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                        </svg>
                    </button>

                    <div class="setting-item">
                        <input type="checkbox" id="showExplanationsToggle" checked />
                        <label for="showExplanationsToggle">Afficher les explications (après vérification)</label>
                    </div>
                </fieldset>

                <div class="quiz-selector-container">
                    <label for="quizSelector">Choisir un quiz :</label>
                    <select id="quizSelector">
                        <option value="digestif" data-file="questions_digestif.json" data-title="Système Digestif">Système Digestif</option>
                        <option value="cardiocirculatoire" data-file="questions_cardiocirculatoire.json" data-title="Cardiocirculatoire">Cardiocirculatoire</option>
                        <option value="respiration" data-file="questions_respiration.json" data-title="Respiration">Respiration</option>
                    </select>
                    <p class="quiz-description" id="quizDescription">Description du quiz...</p>
                    <p class="high-score" id="highScoreDisplay" role="status">Meilleur score : N/A</p>
                </div>
            </header>

            <div class="timer-controls">
                <div class="timer-container" id="timerContainer" style="display: none;">Temps restant : <span class="timer" id="timer">00:00</span></div>
                <div class="timer-setting">
                    <label for="timerDurationInput">Durée (min):</label>
                    <input type="number" id="timerDurationInput" value="10" min="1" max="60" step="1" aria-label="Durée du chronomètre en minutes" />
                    <button type="button" id="timerBtn" disabled>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10" />
                            <polyline points="12 6 12 12 16 14" />
                        </svg>
                        <span id="timerBtnText">Lancer Chrono</span>
                    </button>
                </div>
            </div>

            <div class="progress-navigation-container">
                <div class="progress-container">
                    <div id="progressBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Progression des questions répondues"></div>
                </div>
                <div class="navigation-controls" id="navigationContainer" style="display: none;">
                    <button type="button" id="prevBtn" aria-label="Question précédente">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
                        Précédent
                    </button>
                    <span id="questionCounter" class="question-counter" aria-live="polite">Question ? / ?</span>
                    <button type="button" id="nextBtn" aria-label="Question suivante">
                        Suivant
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6" /></svg>
                    </button>
                </div>
            </div>

            <div id="quizArea">
                <div id="questionDisplayArea" class="question-display-area"></div>

                <form id="quizForm" aria-busy="false" style="display: none;"></form>
            </div>

            <div class="loading-indicator hidden" id="loadingIndicator">
                <div class="spinner"></div>
                Chargement du quiz...
            </div>

            <div class="action-buttons">
                <button type="button" id="checkBtn" disabled>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5" /></svg>
                    Vérifier les réponses
                </button>
                <button type="button" id="resetBtn" disabled>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 2v6h6" />
                        <path d="M3 13a9 9 0 1 0 3-7.7L3 8" />
                    </svg>
                    Réinitialiser
                </button>
            </div>

            <div class="result" id="result" aria-live="polite"></div>

            <footer class="quiz-footer">
                Quiz interactif © 2025
            </footer>
        </div>

        <script src="script.js" defer></script>
    </body>
</html>